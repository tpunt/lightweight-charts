var l=Object.defineProperty;var u=(e,t,i)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var s=(e,t,i)=>u(e,typeof t!="symbol"?t+"":t,i);import{J as _,F as S,g as p,C as m,h as D}from"./sample-data-DmKHkXYO.js";import{c as b}from"./momentum-calculation-D0CgdOK3.js";import"./timestamp-data-Dz1yihFk.js";function f(e,t){class i{constructor(){s(this,"_baseSeries",null);s(this,"_indicatorSeries",null);s(this,"_chart",null);s(this,"_options",null);s(this,"_updateData",()=>{if(!this._indicatorSeries)return;if(!this._baseSeries){this._indicatorSeries.setData([]);return}const a=this._baseSeries.data(),r=b(a,this._options||t);this._indicatorSeries.setData(r)})}attached(a){const{chart:r,series:c}=a;this._chart=r,this._baseSeries=c,this._indicatorSeries=this._chart.addSeries(_),this._options=t,c.subscribeDataChanged(this._updateData),this._updateData()}detached(){var a;this._baseSeries&&this._baseSeries.unsubscribeDataChanged(this._updateData),this._indicatorSeries&&((a=this._chart)==null||a.removeSeries(this._indicatorSeries)),this._indicatorSeries=null}indicatorSeries(){if(!this._indicatorSeries)throw new Error("unable to provide indicator series");return this._indicatorSeries}applyOptions(a){this._options={...this._options||{},...a},this._updateData()}}const o=new i;return e.attachPrimitive(o),o.indicatorSeries()}const y={autoSize:!0},d=S("chart",y),h=p(150,new Date(2024,0,1)),[g,v]=[h.slice(0,100),h.slice(100)],n=d.addSeries(m,{});n.setData(g);const w=f(n,{length:10,source:"close"});w.applyOptions({color:"orange",lineWidth:2,lineStyle:D.Dotted});d.timeScale().fitContent();setTimeout(async()=>{function e(t){return new Promise(i=>{setTimeout(i,t)})}for(const t of v)n.update(t),await e(200)},2e3);
