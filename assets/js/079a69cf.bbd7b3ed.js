"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["8411"],{45508:function(e,t,r){r.r(t),r.d(t,{default:()=>O,frontMatter:()=>d,metadata:()=>n,assets:()=>g,toc:()=>C,contentTitle:()=>u});var n=JSON.parse('{"id":"how_to/set-crosshair-position","title":"Set crosshair position","description":"Examples of how to add a programatically set the crosshair position.","source":"@site/tutorials/how_to/set-crosshair-position.mdx","sourceDirName":"how_to","slug":"/how_to/set-crosshair-position","permalink":"/lightweight-charts/tutorials/how_to/set-crosshair-position","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Set crosshair position","sidebar_label":"Set crosshair position","description":"Examples of how to add a programatically set the crosshair position.","pagination_prev":null,"pagination_next":null,"keywords":["crosshair","tracking","example"]},"sidebar":"tutorialsSidebar"}'),a=r("85893"),i=r("50065"),s=r("30353"),o=r("57378");r("67294");var c=r("6646");function l(e){let{preferredVersion:t}=(0,o.J)(),r=c&&c.length>0?c["0"]:"",n=t?.name??r??"current";return"current"===n||parseFloat(n)>=e.version?e.children:e.fallback({})}var h=r("92329");let d={title:"Set crosshair position",sidebar_label:"Set crosshair position",description:"Examples of how to add a programatically set the crosshair position.",pagination_prev:null,pagination_next:null,keywords:["crosshair","tracking","example"]},u=void 0,g={},C=[{value:"Syncing two charts",id:"syncing-two-charts",level:2},{value:"Tracking without long-press (on mobile)",id:"tracking-without-long-press-on-mobile",level:2}];function m(e){let t={a:"a",code:"code",h2:"h2",p:"p",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["Lightweight Charts\u2122 allows the crosshair position to be set programatically using the ",(0,a.jsx)(t.a,{href:"/docs/api/interfaces/IChartApi#setcrosshairposition",children:(0,a.jsx)(t.code,{children:"setCrosshairPosition"})}),", and cleared using ",(0,a.jsx)(t.a,{href:"/docs/api/interfaces/IChartApi#clearcrosshairposition",children:(0,a.jsx)(t.code,{children:"clearCrosshairPosition"})}),"."]}),"\n",(0,a.jsx)(t.p,{children:"Usually the crosshair position is set automatically by the user's actions. However in some cases you may want to set it explicitly. For example if you want to synchronise the crosshairs of two separate charts."}),"\n","\n","\n",(0,a.jsxs)(l,{version:4.1,fallback:()=>(0,a.jsx)(h.Z,{notCurrent:"These tutorials are for version 4.1 (or greater) of Lightweight Charts\u2122.",type:"caution",displayVersionMessage:!0}),children:[(0,a.jsx)(t.h2,{id:"syncing-two-charts",children:"Syncing two charts"}),(0,a.jsx)(s.ZP,{replaceThemeConstants:!0,chart:!0,className:"language-js",hideableCode:!0,iframeStyle:{height:"500px"},chartOnTop:!0,children:"// remove-start\n// Lightweight Charts\u2122 Example: Crosshair syncing\n// https://tradingview.github.io/lightweight-charts/tutorials/how_to/set-crosshair-position\n// remove-end\n\n// hide-start\nfunction generateData(startValue, startDate) {\n	const res = [];\n	const time = startDate ?? (new Date(Date.UTC(2018, 0, 1, 0, 0, 0, 0)));\n	for (let i = 0; i < 500; ++i) {\n		res.push({\n			time: time.getTime() / 1000,\n			value: i + startValue,\n		});\n\n		time.setUTCDate(time.getUTCDate() + 1);\n	}\n\n	return res;\n}\n\nconst chart1 = createChart(\n	document.getElementById('container'),\n	{\n		height: 250,\n		crosshair: {\n			mode: 0,\n		},\n		timeScale: {\n			visible: false,\n		},\n		layout: {\n			background: {\n				type: 'solid',\n				color: '#FFF5F5',\n			},\n		},\n	}\n);\nconst mainSeries1 = chart1.addSeries(LineSeries, {\n	color: 'red',\n});\n\nmainSeries1.setData(generateData(0));\n\nconst chart2 = createChart(\n	document.getElementById('container'),\n	{\n		height: 250,\n		layout: {\n			background: {\n				type: 'solid',\n				color: '#F5F5FF',\n			},\n		},\n	}\n);\n\nconst mainSeries2 = chart2.addSeries(LineSeries, {\n	color: 'blue',\n});\n\nmainSeries2.setData(generateData(100));\n// hide-end\n\nchart1.timeScale().subscribeVisibleLogicalRangeChange(timeRange => {\n	chart2.timeScale().setVisibleLogicalRange(timeRange);\n});\n\nchart2.timeScale().subscribeVisibleLogicalRangeChange(timeRange => {\n	chart1.timeScale().setVisibleLogicalRange(timeRange);\n});\n\nfunction getCrosshairDataPoint(series, param) {\n	if (!param.time) {\n		return null;\n	}\n	const dataPoint = param.seriesData.get(series);\n	return dataPoint || null;\n}\n\nfunction syncCrosshair(chart, series, dataPoint) {\n	if (dataPoint) {\n		chart.setCrosshairPosition(dataPoint.value, dataPoint.time, series);\n		return;\n	}\n	chart.clearCrosshairPosition();\n}\nchart1.subscribeCrosshairMove(param => {\n	const dataPoint = getCrosshairDataPoint(mainSeries1, param);\n	syncCrosshair(chart2, mainSeries2, dataPoint);\n});\nchart2.subscribeCrosshairMove(param => {\n	const dataPoint = getCrosshairDataPoint(mainSeries2, param);\n	syncCrosshair(chart1, mainSeries1, dataPoint);\n});\n"}),(0,a.jsx)(t.h2,{id:"tracking-without-long-press-on-mobile",children:"Tracking without long-press (on mobile)"}),(0,a.jsx)(t.p,{children:"If scrolling and scaling is disabled, then the API can be used to enable a kind of tracking mode without the user having to long-press the screen."}),(0,a.jsx)(s.ZP,{replaceThemeConstants:!0,chart:!0,className:"language-js",hideableCode:!0,chartOnTop:!0,children:"// remove-start\n// Lightweight Charts\u2122 Example: Crosshair syncing\n// https://tradingview.github.io/lightweight-charts/tutorials/how_to/set-crosshair-position\n// remove-end\n\n// hide-start\nfunction generateData() {\n	const res = [];\n	const time = new Date(Date.UTC(2018, 0, 1, 0, 0, 0, 0));\n	for (let i = 0; i < 500; ++i) {\n		res.push({\n			time: time.getTime() / 1000,\n			value: i,\n		});\n\n		time.setUTCDate(time.getUTCDate() + 1);\n	}\n\n	return res;\n}\n\nconst chart = createChart(\n	document.getElementById('container'),\n	{\n		handleScale: false,\n		handleScroll: false,\n	}\n);\n\nconst mainSeries = chart.addSeries({\n	priceFormat: {\n		minMove: 1,\n		precision: 0,\n	},\n});\n\nmainSeries.setData(generateData());\n\nchart.timeScale().fitContent();\n// hide-end\n\ndocument.getElementById('container').addEventListener('touchmove', e => {\n	const bcr = document.getElementById('container').getBoundingClientRect();\n	const x = bcr.left + e.touches[0].clientX;\n	const y = bcr.top + e.touches[0].clientY;\n\n	const price = mainSeries.coordinateToPrice(y);\n	const time = chart.timeScale().coordinateToTime(x);\n\n	if (!Number.isFinite(price) || !Number.isFinite(time)) {\n		return;\n	}\n\n	chart.setCrosshairPosition(price, time, mainSeries);\n});\n\ndocument.getElementById('container').addEventListener('touchend', () => {\n	chart.clearCrosshairPosition();\n});\n"})]})]})}function O(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},30353:function(e,t,r){r.d(t,{ZP:()=>L});var n=r("85893"),a=r("67294"),i=r("31705"),s=r("44634"),o=r("79207"),c=r("57378"),l=r("64926"),h=r("6646");function d(e,t,r){e.addEventListener("resize",()=>{let e=t.getBoundingClientRect();r(e.width,e.height)},!0)}let u={3.8:async e=>{let t=await r.e("70967").then(r.bind(r,51083));return{module:t,createChart:(r,n)=>{let a=t.createChart(r,n);return d(e,r,a.resize.bind(a)),a},createChartEx:void 0,createYieldCurveChart:void 0,createOptionsChart:void 0}},"4.0":async e=>{let t=await r.e("98966").then(r.bind(r,11413));return{module:t,createChart:(r,n)=>{let a=t.createChart(r,n);return d(e,r,a.resize.bind(a)),a},createChartEx:void 0,createYieldCurveChart:void 0,createOptionsChart:void 0}},4.1:async e=>{let t=await r.e("85998").then(r.bind(r,1860));return{module:t,createChart:(r,n)=>{let a=t.createChart(r,n);return d(e,r,a.resize.bind(a)),a},createChartEx:(r,n,a)=>{let i=t.createChartEx(r,n,a);return d(e,r,i.resize.bind(i)),i},createYieldCurveChart:void 0,createOptionsChart:void 0}},4.2:async e=>{let t=await r.e("15373").then(r.bind(r,15757));return{module:t,createChart:(r,n)=>{let a=t.createChart(r,n);return d(e,r,a.resize.bind(a)),a},createChartEx:(r,n,a)=>{let i=t.createChartEx(r,n,a);return d(e,r,i.resize.bind(i)),i},createYieldCurveChart:void 0,createOptionsChart:void 0}},"5.0":async e=>{let t=await r.e("11191").then(r.bind(r,96473));return{module:t,createChart:(r,n)=>{let a=t.createChart(r,n);return d(e,r,a.resize.bind(a)),a},createChartEx:(r,n,a)=>{let i=t.createChartEx(r,n,a);return d(e,r,i.resize.bind(i)),i},createYieldCurveChart:(r,n)=>{let a=t.createYieldCurveChart(r,n);return d(e,r,a.resize.bind(a)),a},createOptionsChart:(r,n)=>{let a=t.createOptionsChart(r,n);return d(e,r,a.resize.bind(a)),a}}},current:async()=>{let e=await r.e("22433").then(r.bind(r,3768));return{module:e,createChart:(t,r)=>{let n=e.createChart(t,r);return d(window,t,n.resize.bind(n)),n},createChartEx:(t,r,n)=>{let a=e.createChartEx(t,r,n);return d(window,t,a.resize.bind(a)),a},createYieldCurveChart:(t,r)=>{let n=e.createYieldCurveChart(t,r);return d(window,t,n.resize.bind(n)),n},createOptionsChart:(t,r)=>{let n=e.createOptionsChart(t,r);return d(window,t,n.resize.bind(n)),n}}}},g={iframe:"iframe_R_Fr"};function C(e){let{script:t,iframeStyle:r}=e,{preferredVersion:i}=(0,c.J)(),s=h&&h.length>0?h["0"]:"",o=i?.name??s??"current",d=`
		<style>
			html,
			body,
			#container {
				width: 100%;
				height: 100%;
				overflow: hidden;
				margin: 0;
			}
		</style>
		<div id="container"></div>
		<script>
			window.run = () => {
				${t}
			};
		</script>
	`,C=a.useRef(null),m="current"===o||parseInt(o.split(".")[0])>=5;return(a.useEffect(()=>{let e=C.current,t=e?.contentWindow,r=e?.contentDocument;if(null===e||!t||!r||!m)return;let n=async()=>{try{let{module:e,createChart:r,createChartEx:n,createYieldCurveChart:a,createOptionsChart:i}=await u[o](t);Object.assign(t,e),t.createChart=r,t.createChartEx=n,t.createYieldCurveChart=a,t.createOptionsChart=i,t.LineSeries=e.LineSeries,t.AreaSeries=e.AreaSeries,t.CandlestickSeries=e.CandlestickSeries,t.BarSeries=e.BarSeries,t.HistogramSeries=e.HistogramSeries,t.run?.()}catch(e){console.error(e)}};if(void 0!==t.run)n();else{let t=()=>{n(),e.removeEventListener("load",t)};e.addEventListener("load",t)}},[d]),m)?(0,n.jsx)("iframe",{ref:C,srcDoc:d,className:g.iframe,style:r},t):(0,n.jsx)("div",{children:(0,n.jsx)(l.Z,{type:"caution",title:"Chart visualization is not available for this version",children:(0,n.jsx)("p",{children:"Switch to a version 5 or higher to see the chart"})})})}var m=r("98159");let O=()=>`${Math.random().toString(36).slice(2,11)}`,p=Object.keys(m.l.DARK),L=e=>{let{chart:t,replaceThemeConstants:r,hideableCode:c,chartOnly:l,chartOnTop:h=!1,iframeStyle:d,replaceTabs:u=!0,codeUsage:L,..._}=e,{children:b}=e,{colorMode:E}=(0,o.I)(),R=function(){let[e,t]=(0,a.useState)("");return(0,a.useEffect)(()=>t(O()),[]),e}();if(r&&"string"==typeof b&&(b=function(e,t){let r=t?m.l.DARK:m.l.LIGHT,n=e;for(let e of p)n=n.replace(RegExp(e,"g"),`'${r[e]}'`);return n}(b,"dark"===E)),u&&"string"==typeof b&&(b=b.replace(/\t/g,"    ")),b=b.replace(RegExp(/\/\/ delete-start[\w\W]*?\/\/ delete-end/,"gm"),""),t||c){let e=!l&&(0,n.jsx)(i.Z,{..._,children:b}),r=t&&(0,n.jsx)(s.Z,{fallback:(0,n.jsx)("div",{className:g.iframe,children:"\xa0"}),children:()=>(0,n.jsx)(C,{script:b,iframeStyle:d})}),a=c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{id:R,type:"checkbox",className:"toggle-hidden-lines"}),(0,n.jsx)("label",{className:"toggle-label",htmlFor:R,children:"Show all code"})]});return h?(0,n.jsxs)(n.Fragment,{children:[r,L,a,e]}):(0,n.jsxs)(n.Fragment,{children:[L,a,e,r]})}return(0,n.jsx)(i.Z,{..._,children:b})}},92329:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(85893),a=r(57378),i=r(64926);r(67294);var s=r(6646);function o(e){let{notCurrent:t,isCurrent:r,type:o,title:c,displayVersionMessage:l}=e,{preferredVersion:h,savePreferredVersionName:d}=(0,a.J)(),u=!!(t&&!h?.isLast),g=!!(r&&h?.isLast),C=s&&s.length>0?s["0"]:"",m=h?.label??h?.name??"";if(!u&&!g||!m)return(0,n.jsx)(n.Fragment,{});let O=(u?t:r)??"";return O=O.replace(/DOC_VERSION/g,m).replace(/CURRENT_VERSION/g,C),(0,n.jsx)("div",{children:(0,n.jsxs)(i.Z,{type:o,title:c,children:[(0,n.jsx)("p",{children:O}),l&&(0,n.jsxs)("p",{children:["You are currently viewing the documentation for the version tagged:"," ",(0,n.jsx)("strong",{children:m}),". ",(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:(0,n.jsx)("a",{href:"",onClick:()=>d(C),children:"Switch to the latest published version"})})," ","(",C,")"]})]})})}},98159:function(e,t,r){r.d(t,{l:function(){return n}});let n={DARK:{CHART_BACKGROUND_COLOR:"black",CHART_BACKGROUND_RGB_COLOR:"0, 0, 0",LINE_LINE_COLOR:"#2962FF",LINE_LINE2_COLOR:"rgb(225, 87, 90)",LINE_LINE3_COLOR:"rgb(242, 142, 44)",LINE_LINE4_COLOR:"rgb(164, 89, 209)",LINE_LINE5_COLOR:"rgb(27, 156, 133)",AREA_TOP_COLOR:"#2962FF",AREA_BOTTOM_COLOR:"rgba(41, 98, 255, 0.28)",BAR_UP_COLOR:"#26a69a",BAR_DOWN_COLOR:"#ef5350",BASELINE_TOP_LINE_COLOR:"rgba( 38, 166, 154, 1)",BASELINE_TOP_FILL_COLOR1:"rgba( 38, 166, 154, 0.28)",BASELINE_TOP_FILL_COLOR2:"rgba( 38, 166, 154, 0.05)",BASELINE_BOTTOM_LINE_COLOR:"rgba( 239, 83, 80, 1)",BASELINE_BOTTOM_FILL_COLOR1:"rgba( 239, 83, 80, 0.05)",BASELINE_BOTTOM_FILL_COLOR2:"rgba( 239, 83, 80, 0.28)",HISTOGRAM_COLOR:"#26a69a",CHART_TEXT_COLOR:"white"},LIGHT:{CHART_BACKGROUND_COLOR:"white",CHART_BACKGROUND_RGB_COLOR:"255, 255, 255",LINE_LINE_COLOR:"#2962FF",LINE_LINE2_COLOR:"rgb(225, 87, 90)",LINE_LINE3_COLOR:"rgb(242, 142, 44)",LINE_LINE4_COLOR:"rgb(164, 89, 209)",LINE_LINE5_COLOR:"rgb(27, 156, 133)",AREA_TOP_COLOR:"#2962FF",AREA_BOTTOM_COLOR:"rgba(41, 98, 255, 0.28)",BAR_UP_COLOR:"#26a69a",BAR_DOWN_COLOR:"#ef5350",BASELINE_TOP_LINE_COLOR:"rgba( 38, 166, 154, 1)",BASELINE_TOP_FILL_COLOR1:"rgba( 38, 166, 154, 0.28)",BASELINE_TOP_FILL_COLOR2:"rgba( 38, 166, 154, 0.05)",BASELINE_BOTTOM_LINE_COLOR:"rgba( 239, 83, 80, 1)",BASELINE_BOTTOM_FILL_COLOR1:"rgba( 239, 83, 80, 0.05)",BASELINE_BOTTOM_FILL_COLOR2:"rgba( 239, 83, 80, 0.28)",HISTOGRAM_COLOR:"#26a69a",CHART_TEXT_COLOR:"black"}}},6646:function(e){e.exports=JSON.parse('["5.0","4.2","4.1","4.0","3.8"]')}}]);