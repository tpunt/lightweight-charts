"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["24714"],{22742:function(e,t,r){r.d(t,{ZP:function(){return l},d$:function(){return i}});var a=r(85893),n=r(50065);let i=[];function s(e){let t={a:"a",admonition:"admonition",code:"code",li:"li",p:"p",ul:"ul",...(0,n.a)(),...e.components},{Details:r}=t;return r||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(r,{children:[(0,a.jsx)("summary",{children:"How to use the code sample"}),(0,a.jsx)("strong",{children:"The code presented below requires:"}),(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["That ",(0,a.jsx)(t.code,{children:"createChart"})," has already been imported. See ",(0,a.jsx)(t.a,{href:"/docs#creating-a-chart",children:"Getting Started"})," for more information,"]}),"\n",(0,a.jsxs)(t.li,{children:["and that there is an html div element on the page with an ",(0,a.jsx)(t.code,{children:"id"})," of ",(0,a.jsx)(t.code,{children:"container"}),"."]}),"\n"]}),(0,a.jsxs)(t.p,{children:["Here is an example skeleton setup: ",(0,a.jsx)(t.a,{href:"https://codesandbox.io/s/lightweight-charts-skeleton-n67pm6",children:"Code Sandbox"}),".\nYou can paste the provided code below the ",(0,a.jsx)(t.code,{children:"// REPLACE EVERYTHING BELOW HERE"})," comment."]}),(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsx)(t.p,{children:"Some code may be hidden to improve readability. Toggle the checkbox above the code block to reveal all the code."})})]})}function l(e={}){let{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(s,{...e})}):s(e)}},31853:function(e,t,r){r.r(t),r.d(t,{default:()=>p,frontMatter:()=>c,metadata:()=>a,assets:()=>o,toc:()=>h,contentTitle:()=>d});var a=JSON.parse('{"id":"demos/yield-curve-with-update-markers","title":"Yield Curve Chart with Update Markers","description":"An example of a yield curve chart with real-time updates using markers","source":"@site/tutorials/demos/yield-curve-with-update-markers.mdx","sourceDirName":"demos","slug":"/demos/yield-curve-with-update-markers","permalink":"/lightweight-charts/tutorials/demos/yield-curve-with-update-markers","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Yield Curve Chart with Update Markers","sidebar_label":"Yield Curve with Updates","description":"An example of a yield curve chart with real-time updates using markers","pagination_prev":null,"pagination_next":null,"keywords":["yield curve","realtime updates","markers","plugins"]},"sidebar":"tutorialsSidebar"}'),n=r("85893"),i=r("50065"),s=r("22742"),l=r("30353");let c={title:"Yield Curve Chart with Update Markers",sidebar_label:"Yield Curve with Updates",description:"An example of a yield curve chart with real-time updates using markers",pagination_prev:null,pagination_next:null,keywords:["yield curve","realtime updates","markers","plugins"]},d=void 0,o={},h=[];function u(e){let t={a:"a",code:"code",li:"li",ol:"ol",p:"p",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["This sample demonstrates how to create a yield curve chart with real-time\nupdates using Lightweight Charts\u2122. The chart displays two\n",(0,n.jsx)(t.a,{href:"/docs/next/chart-types#yield-curve-chart",children:"yield curves"})," and utilizes the\n",(0,n.jsx)(t.a,{href:"/docs/next/api/functions/createUpDownMarkers",children:"UpDownMarkersPrimitive"})," plugin\nto show price change markers for updates."]}),"\n",(0,n.jsxs)(t.p,{children:["The chart is initialized with historical yield curve data for two series. By\nusing the ",(0,n.jsx)(t.code,{children:"setInterval"})," function, we simulate real-time updates to the first\ncurve. These updates are applied using the ",(0,n.jsx)(t.code,{children:"update"})," method provided by the\nUpDownMarkersPrimitive, which automatically handles the creation and display of\nmarkers for price changes."]}),"\n",(0,n.jsx)(t.p,{children:"Key features of this demo:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Yield curve chart configuration with custom time range settings."}),"\n",(0,n.jsx)(t.li,{children:"Two line series representing different yield curves."}),"\n",(0,n.jsx)(t.li,{children:"Usage of the UpDownMarkersPrimitive plugin for displaying update markers."}),"\n",(0,n.jsx)(t.li,{children:"Simulated real-time updates to demonstrate dynamic data handling."}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["The UpDownMarkersPrimitive is attached to the first series when created using\n",(0,n.jsx)(t.code,{children:"priceChangeMarkers = createUpDownMarkers(series1)"}),". We then use\n",(0,n.jsx)(t.code,{children:"priceChangeMarkers.setData(curve1)"})," to initialize the data and\n",(0,n.jsx)(t.code,{children:"priceChangeMarkers.update(...)"})," for subsequent updates. This approach allows\nthe primitive to manage both the series data and the markers, providing a\nseamless way to visualize price changes."]}),"\n","\n",(0,n.jsx)(l.ZP,{replaceThemeConstants:!0,chart:!0,className:"language-js",hideableCode:!0,chartOnTop:!0,codeUsage:(0,n.jsx)(s.ZP,{}),children:"// remove-start\n// Lightweight Charts\u2122 Example: Yield Curve Chart with Update Markers\n// https://tradingview.github.io/lightweight-charts/tutorials/demos/yield-curve-with-update-markers\n\n// remove-end\n\n// hide-start\nconst curve1 = [\n	{ time: 1, value: 5.378 },\n	{ time: 2, value: 5.372 },\n	{ time: 3, value: 5.271 },\n	{ time: 6, value: 5.094 },\n	{ time: 12, value: 4.739 },\n	{ time: 24, value: 4.237 },\n	{ time: 36, value: 4.036 },\n	{ time: 60, value: 3.887 },\n	{ time: 84, value: 3.921 },\n	{ time: 120, value: 4.007 },\n	{ time: 240, value: 4.366 },\n	{ time: 360, value: 4.29 },\n];\nconst curve2 = [\n	{ time: 1, value: 5.381 },\n	{ time: 2, value: 5.393 },\n	{ time: 3, value: 5.425 },\n	{ time: 6, value: 5.494 },\n	{ time: 12, value: 5.377 },\n	{ time: 24, value: 4.883 },\n	{ time: 36, value: 4.554 },\n	{ time: 60, value: 4.241 },\n	{ time: 84, value: 4.172 },\n	{ time: 120, value: 4.084 },\n	{ time: 240, value: 4.365 },\n	{ time: 360, value: 4.176 },\n];\n// hide-end\n\nconst chartOptions = {\n	autoSize: true,\n	layout: {\n		textColor: CHART_TEXT_COLOR,\n		background: { type: 'solid', color: CHART_BACKGROUND_COLOR },\n	},\n	yieldCurve: {\n		baseResolution: 12,\n		minimumTimeRange: 10,\n		startTimeRange: 3,\n	},\n	handleScroll: false,\n	handleScale: false,\n	grid: {\n		vertLines: {\n			visible: false,\n		},\n		horzLines: {\n			visible: false,\n		},\n	},\n	timeScale: {\n		minBarSpacing: 3,\n	},\n};\n\nconst container = document.getElementById('container');\nconst chart = createYieldCurveChart(container, chartOptions);\n\nconst series1 = chart.addSeries(LineSeries, {\n	lineType: 2,\n	color: '#26c6da',\n	pointMarkersVisible: true,\n	lineWidth: 2,\n});\nconst priceChangeMarkers = createUpDownMarkers(series1);\npriceChangeMarkers.setData(curve1);\n\nconst series2 = chart.addSeries(LineSeries, {\n	lineType: 2,\n	color: 'rgb(164, 89, 209)',\n	pointMarkersVisible: true,\n	lineWidth: 1,\n});\nseries2.setData(curve2);\n\nchart.timeScale().fitContent();\n\nchart.timeScale().subscribeSizeChange(() => {\n	chart.timeScale().fitContent();\n});\n\nsetInterval(() => {\n	curve1\n		.filter(() => Math.random() < 0.1)\n		.forEach(data => {\n			const shift = (Math.random() > 0.5 ? -1 : 1) * Math.random() * 0.01 * data.value;\n			priceChangeMarkers.update(\n				{\n					...data,\n					value: data.value + shift,\n				},\n				true\n			);\n		});\n}, 5000);\n"})]})}function p(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},30353:function(e,t,r){r.d(t,{ZP:()=>g});var a=r("85893"),n=r("67294"),i=r("31705"),s=r("44634"),l=r("79207"),c=r("57378"),d=r("64926"),o=r("6646");function h(e,t,r){e.addEventListener("resize",()=>{let e=t.getBoundingClientRect();r(e.width,e.height)},!0)}let u={3.8:async e=>{let t=await r.e("70967").then(r.bind(r,51083));return{module:t,createChart:(r,a)=>{let n=t.createChart(r,a);return h(e,r,n.resize.bind(n)),n},createChartEx:void 0,createYieldCurveChart:void 0,createOptionsChart:void 0}},"4.0":async e=>{let t=await r.e("98966").then(r.bind(r,11413));return{module:t,createChart:(r,a)=>{let n=t.createChart(r,a);return h(e,r,n.resize.bind(n)),n},createChartEx:void 0,createYieldCurveChart:void 0,createOptionsChart:void 0}},4.1:async e=>{let t=await r.e("85998").then(r.bind(r,1860));return{module:t,createChart:(r,a)=>{let n=t.createChart(r,a);return h(e,r,n.resize.bind(n)),n},createChartEx:(r,a,n)=>{let i=t.createChartEx(r,a,n);return h(e,r,i.resize.bind(i)),i},createYieldCurveChart:void 0,createOptionsChart:void 0}},4.2:async e=>{let t=await r.e("15373").then(r.bind(r,15757));return{module:t,createChart:(r,a)=>{let n=t.createChart(r,a);return h(e,r,n.resize.bind(n)),n},createChartEx:(r,a,n)=>{let i=t.createChartEx(r,a,n);return h(e,r,i.resize.bind(i)),i},createYieldCurveChart:void 0,createOptionsChart:void 0}},"5.0":async e=>{let t=await r.e("11191").then(r.bind(r,96473));return{module:t,createChart:(r,a)=>{let n=t.createChart(r,a);return h(e,r,n.resize.bind(n)),n},createChartEx:(r,a,n)=>{let i=t.createChartEx(r,a,n);return h(e,r,i.resize.bind(i)),i},createYieldCurveChart:(r,a)=>{let n=t.createYieldCurveChart(r,a);return h(e,r,n.resize.bind(n)),n},createOptionsChart:(r,a)=>{let n=t.createOptionsChart(r,a);return h(e,r,n.resize.bind(n)),n}}},current:async()=>{let e=await r.e("22433").then(r.bind(r,3768));return{module:e,createChart:(t,r)=>{let a=e.createChart(t,r);return h(window,t,a.resize.bind(a)),a},createChartEx:(t,r,a)=>{let n=e.createChartEx(t,r,a);return h(window,t,n.resize.bind(n)),n},createYieldCurveChart:(t,r)=>{let a=e.createYieldCurveChart(t,r);return h(window,t,a.resize.bind(a)),a},createOptionsChart:(t,r)=>{let a=e.createOptionsChart(t,r);return h(window,t,a.resize.bind(a)),a}}}},p={iframe:"iframe_R_Fr"};function m(e){let{script:t,iframeStyle:r}=e,{preferredVersion:i}=(0,c.J)(),s=o&&o.length>0?o["0"]:"",l=i?.name??s??"current",h=`
		<style>
			html,
			body,
			#container {
				width: 100%;
				height: 100%;
				overflow: hidden;
				margin: 0;
			}
		</style>
		<div id="container"></div>
		<script>
			window.run = () => {
				${t}
			};
		</script>
	`,m=n.useRef(null),C="current"===l||parseInt(l.split(".")[0])>=5;return(n.useEffect(()=>{let e=m.current,t=e?.contentWindow,r=e?.contentDocument;if(null===e||!t||!r||!C)return;let a=async()=>{try{let{module:e,createChart:r,createChartEx:a,createYieldCurveChart:n,createOptionsChart:i}=await u[l](t);Object.assign(t,e),t.createChart=r,t.createChartEx=a,t.createYieldCurveChart=n,t.createOptionsChart=i,t.LineSeries=e.LineSeries,t.AreaSeries=e.AreaSeries,t.CandlestickSeries=e.CandlestickSeries,t.BarSeries=e.BarSeries,t.HistogramSeries=e.HistogramSeries,t.run?.()}catch(e){console.error(e)}};if(void 0!==t.run)a();else{let t=()=>{a(),e.removeEventListener("load",t)};e.addEventListener("load",t)}},[h]),C)?(0,a.jsx)("iframe",{ref:m,srcDoc:h,className:p.iframe,style:r},t):(0,a.jsx)("div",{children:(0,a.jsx)(d.Z,{type:"caution",title:"Chart visualization is not available for this version",children:(0,a.jsx)("p",{children:"Switch to a version 5 or higher to see the chart"})})})}var C=r("98159");let O=()=>`${Math.random().toString(36).slice(2,11)}`,v=Object.keys(C.l.DARK),g=e=>{let{chart:t,replaceThemeConstants:r,hideableCode:c,chartOnly:d,chartOnTop:o=!1,iframeStyle:h,replaceTabs:u=!0,codeUsage:g,...L}=e,{children:_}=e,{colorMode:f}=(0,l.I)(),b=function(){let[e,t]=(0,n.useState)("");return(0,n.useEffect)(()=>t(O()),[]),e}();if(r&&"string"==typeof _&&(_=function(e,t){let r=t?C.l.DARK:C.l.LIGHT,a=e;for(let e of v)a=a.replace(RegExp(e,"g"),`'${r[e]}'`);return a}(_,"dark"===f)),u&&"string"==typeof _&&(_=_.replace(/\t/g,"    ")),_=_.replace(RegExp(/\/\/ delete-start[\w\W]*?\/\/ delete-end/,"gm"),""),t||c){let e=!d&&(0,a.jsx)(i.Z,{...L,children:_}),r=t&&(0,a.jsx)(s.Z,{fallback:(0,a.jsx)("div",{className:p.iframe,children:"\xa0"}),children:()=>(0,a.jsx)(m,{script:_,iframeStyle:h})}),n=c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{id:b,type:"checkbox",className:"toggle-hidden-lines"}),(0,a.jsx)("label",{className:"toggle-label",htmlFor:b,children:"Show all code"})]});return o?(0,a.jsxs)(a.Fragment,{children:[r,g,n,e]}):(0,a.jsxs)(a.Fragment,{children:[g,n,e,r]})}return(0,a.jsx)(i.Z,{...L,children:_})}},98159:function(e,t,r){r.d(t,{l:function(){return a}});let a={DARK:{CHART_BACKGROUND_COLOR:"black",CHART_BACKGROUND_RGB_COLOR:"0, 0, 0",LINE_LINE_COLOR:"#2962FF",LINE_LINE2_COLOR:"rgb(225, 87, 90)",LINE_LINE3_COLOR:"rgb(242, 142, 44)",LINE_LINE4_COLOR:"rgb(164, 89, 209)",LINE_LINE5_COLOR:"rgb(27, 156, 133)",AREA_TOP_COLOR:"#2962FF",AREA_BOTTOM_COLOR:"rgba(41, 98, 255, 0.28)",BAR_UP_COLOR:"#26a69a",BAR_DOWN_COLOR:"#ef5350",BASELINE_TOP_LINE_COLOR:"rgba( 38, 166, 154, 1)",BASELINE_TOP_FILL_COLOR1:"rgba( 38, 166, 154, 0.28)",BASELINE_TOP_FILL_COLOR2:"rgba( 38, 166, 154, 0.05)",BASELINE_BOTTOM_LINE_COLOR:"rgba( 239, 83, 80, 1)",BASELINE_BOTTOM_FILL_COLOR1:"rgba( 239, 83, 80, 0.05)",BASELINE_BOTTOM_FILL_COLOR2:"rgba( 239, 83, 80, 0.28)",HISTOGRAM_COLOR:"#26a69a",CHART_TEXT_COLOR:"white"},LIGHT:{CHART_BACKGROUND_COLOR:"white",CHART_BACKGROUND_RGB_COLOR:"255, 255, 255",LINE_LINE_COLOR:"#2962FF",LINE_LINE2_COLOR:"rgb(225, 87, 90)",LINE_LINE3_COLOR:"rgb(242, 142, 44)",LINE_LINE4_COLOR:"rgb(164, 89, 209)",LINE_LINE5_COLOR:"rgb(27, 156, 133)",AREA_TOP_COLOR:"#2962FF",AREA_BOTTOM_COLOR:"rgba(41, 98, 255, 0.28)",BAR_UP_COLOR:"#26a69a",BAR_DOWN_COLOR:"#ef5350",BASELINE_TOP_LINE_COLOR:"rgba( 38, 166, 154, 1)",BASELINE_TOP_FILL_COLOR1:"rgba( 38, 166, 154, 0.28)",BASELINE_TOP_FILL_COLOR2:"rgba( 38, 166, 154, 0.05)",BASELINE_BOTTOM_LINE_COLOR:"rgba( 239, 83, 80, 1)",BASELINE_BOTTOM_FILL_COLOR1:"rgba( 239, 83, 80, 0.05)",BASELINE_BOTTOM_FILL_COLOR2:"rgba( 239, 83, 80, 0.28)",HISTOGRAM_COLOR:"#26a69a",CHART_TEXT_COLOR:"black"}}},6646:function(e){e.exports=JSON.parse('["5.0","4.2","4.1","4.0","3.8"]')}}]);